
{% extends 'base.html' %}
{% load widget_tweaks %}
{% load static %}
{% block head %}
<!--libreria para el autocompletado-->
<link href="{% static 'lib/jquery-ui-1.12.1/jquery-ui.min.css' %}" rel="stylesheet"/>
<script src="{% static 'lib/jquery-ui-1.12.1/jquery-ui.min.js' %}"></script>


<link href="{% static 'lib/select2-4.0.13/css/select2.min.css' %}" rel="stylesheet"/>
    <link href="{% static 'lib/select2-4.0.13/css/select2-bootstrap4.min.css' %}" rel="stylesheet"/>
    <script src="{% static 'lib/select2-4.0.13/js/select2.min.js' %}"></script>
    <script src="{% static 'lib/select2-4.0.13/js/i18n/es.js' %}"></script>

    <script src="{% static 'lib/moment-2.25.3/moment-with-locales.js' %}"></script>
    <script src="{% static 'lib/tempusdominus-bootstrap-4/tempusdominus-bootstrap-4.min.js' %}"></script>
    <link href="{% static 'lib/tempusdominus-bootstrap-4/tempusdominus-bootstrap-4.min.css' %}" rel="stylesheet"/>
    
    <link rel="stylesheet" href="{% static 'lib/datatables-1.10.20/css/dataTables.bootstrap4.min.css' %}"/>
<link rel="stylesheet"
      href="{% static 'lib/datatables-1.10.20/plugins/responsive-2.2.3/css/responsive.bootstrap4.min.css' %}"/>
<script src="{% static 'lib/datatables-1.10.20/js/jquery.dataTables.js' %}"></script>
<script src="{% static 'lib/datatables-1.10.20/js/dataTables.bootstrap4.min.js' %}"></script>
<script src="{% static 'lib/datatables-1.10.20/plugins/responsive-2.2.3/js/dataTables.responsive.min.js' %}"></script>
<script src="{% static 'lib/datatables-1.10.20/plugins/responsive-2.2.3/js/responsive.bootstrap4.min.js' %}"></script>
   
<link href="{% static 'lib/bootstrap-touchspin-4.3.0/jquery.bootstrap-touchspin.css' %}" rel="stylesheet"/>
<script src="{% static 'lib/bootstrap-touchspin-4.3.0/jquery.bootstrap-touchspin.js' %}"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>

    <script src="{% static '/js/formcompra.js' %}"></script>
    

{% endblock %}

{% block content %}
<form method="post">

    <div class="col-md-12">
      <div class="card card-default ">
        <div class="card-header ">
          <h3 class="card-title">
            
            {{ title }}
          </h3>
        </div>
       
        <div class="card-body ">
            <div class="row">
                <div class="col-lg-8">
                    <div class="card card-secondary">
                        <div class="card-header">
                            <h3 class="card-title"></i> Orden de compra </h3>
                        </div>
                        <div class="card-body">
                            <input type="hidden" name="action" value="{{ action }}"> <!--para que reciba el action en mi vista-->
                            <div class="form-group">
                                <label>Buscador material:</label>
                                <div class="input-group">
                                       <input type="text" class="form-control" autocomplete="off"
                                               placeholder="Ingrese una descripción" maxlength="50" name="buscar">
                                               {% csrf_token %}
                                    <div class="input-group-append">
                                        
                                        <div class="dropdown-menu">
                                            <a class="dropdown-item btnSearchProducts">
                                                Buscar material
                                            </a>
                                            <a class="dropdown-item btnClearSearch">
                                                 Limpiar búsqueda
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <button type="button" class="btn btn-danger  btnRemoveAll">
                                Eliminar todos mis items
                            </button>
                            <hr>
                            <table class="table table-bordered" id="tblarticulo">
                                <thead>
                                <tr>
                                    <th>Eliminar</th>
                                    <th>Material</th>
                                    <th>Cantidad</th>
                                    <th>Stock</th>
                                    <th>Cantidad compra</th>
                                    <th>Total compra</th>
                                    <th>Precio</th>
                                    <th>Subtotal</th>            
                                    
                     
                                    
                                   
                                </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="card card-secondary">
                        <div class="card-header">
                            <h3 class="card-title"> Datos orden de compra</h3>
                        </div>
                        <div class="card-body">
                            <input type="hidden" name="action" value="{{ action }}">
                            <div class="form-group">
                                <div class="form-group">
                                    <label>Usuario:</label>
                                    {{ user.username}}
                                </div>
                                <label>Fecha:</label>
                                {{ form.fecha }}
                            </div>
                           
                        </div>
                        <div class="form-group">
                            <label>Articulo:</label>
                            {{ form.articulo }}
                        </div>
                        <div class="form-group">
                            <label>Cantidad:</label>
                            {{ form.cantidadcompra }}
                        </div>

                            </div>
                            <div class="form-group">
                                <label>Subtotal:</label>
                                Q {{ form.subtotal }}
                            </div>
                           
                            
                           
                            <div class="form-group">
                                <label>Proveedor</label>
                                Q {{ form.proveedor}}
                            </div>
                        </div>
                        <div class="form-group">
                            <label>No.</label>
                            {{ form.idorden_compra_material}}
                        </div>
                    </div>
                       
                        <div class="form-group">
                            <label>Total compra:</label>
                            {{ form.total }}
                        </div>

                        <div class="form-group">
                            <label >Observaciones</label>
                            {{ form.observaciones }}
                        </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
          
        </div class="card-footer">

       <div>
        <button type="submit" class="btn btn-primary btn-flat">
           Guardar registro
        </button>
       </div> <!--crear url esta en mi views context -->
      </div>
    
  
    </form>

      
    <script>
        cotizacion1.items.material = {{ det|safe }};
        cotizacion1.list();
        var det = {{ det|safe }};
        console.log(det);


    </script>


{% endblock %}




  
  
